<mat-sidenav-container fullscreen [hasBackdrop]="false" *transloco="let t; read: 'EXAMS'">
  <div class="relative flex flex-col flex-auto min-w-0 overflow-hidden">

    <!-- <div class="col-lg-4 col-md-12 col-sm-12">
                    
            <h1><span style="cursor: pointer;"><i class="fa fa-arrow-circle-o-left" (click)="handleBack()"></i></span> &nbsp; {{'Participants Detail' | translate}}</h1>
            <p>{{'HOME' | translate}} > {{'Participants List' | translate}}</p>
        </div>
     -->
    <div
      class="flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between p-6 sm:py-3 sm:px-10 border-b bg-card dark:bg-transparent">
      <div class="flex-1 min-w-0">
        <!-- Breadcrumbs -->

        <!-- Title -->

        <div class="mt-2">
          <h2>


            <!-- <span mat-icon-button class="material-icons" (click)="handleBack()">arrow_circle_left</span> -->
          </h2>
          <h2 class="text-3xl md:text-4xl font-extrabold tracking-tight leading-7 sm:leading-10 truncate">
            <button mat-icon-button (click)="handleBack()">
              <mat-icon>arrow_circle_left</mat-icon>
            </button>
          </h2>&nbsp;
          <!-- <h3 style="font-weight: bold;">{{title}}</h3> -->

        </div>
      </div>
      <div class="flex items-center justify-end">
        <div class="example-header">
          <mat-form-field>
            <mat-icon>search</mat-icon>
            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="{{t('SEARCH')}}">
          </mat-form-field>
        </div>
      </div>
      <button mat-flat-button="" type="button" (click)="OpenImportscreen()"
      class="mat-focus-indicator ml-4 mat-flat-button mat-button-base mat-primary" style="background: #941C3C;"><span
        class="mat-button-wrapper"> <mat-icon class="material-icons">
          add
        </mat-icon> {{t('Import Questions PDF')}}</span>

    </button> &nbsp;
      <button mat-flat-button="" type="button" (click)="sidenav.toggle();addDialog()"
        class="mat-focus-indicator ml-4 mat-flat-button mat-button-base mat-primary" style="background: #941C3C;"><span
          class="mat-button-wrapper"> <mat-icon class="material-icons">
            add
          </mat-icon> {{t('Add Question')}} </span>

      </button>
    </div>

    <!-- Header & Cards -->
    <div class="relative pb-12 sm:pt-0 sm:pb-2 px-6 sm:px-6 overflow-hidden">

      <!-- Card -->
      <div class="flex flex-col items-center mt-10 sm:mt-5">
        <fuse-card class="flex-col lg:flex-row w-full lg:max-w-7xl overflow-x-auto overflow-y-hidden">

          <div class="grid grid-flow-col lg:grid-flow-row min-w-max lg:min-w-0 divide-x lg:divide-x-0 lg:divide-y"
            style="width: 100%">

            <div class="example-loading-shade" style="margin: auto;margin-top: 15px;" *ngIf="loading">
              <mat-spinner *ngIf="loading" class="orange-spinner"></mat-spinner>

            </div>

            <div class="mat-elevation-z8">



              <table mat-table [dataSource]="dataSource" multiTemplateDataRows style="width: 100%" matSort
                matSortActive="questionName" matSortDisableClear matSortDirection="desc"
                (matSortChange)="applySort($event)">

                <ng-container matColumnDef="questionName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{t('Question')}}</th>
                  <td matTooltip="{{element.questionName}}" mat-cell *matCellDef="let element">
                    {{(element.questionName.length > 80) ? ((element.questionName).slice(0, 80) + '...') :
                    element.questionName}}
                  </td>
                </ng-container>

                <ng-container matColumnDef="correctOption">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> {{t('Correct Answer')}}</th>
                  <td matTooltip="{{element.correctOption}}" mat-cell *matCellDef="let element">
                    {{((element.correctOption).length > 10) ? ((element.correctOption).slice(0, 10) + '...') :
                    element.correctOption}}
                  </td>
                </ng-container>

                <!-- <ng-container matColumnDef="marks">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{t('Marks')}}</th>
                  <td mat-cell *matCellDef="let element"> 1 </td>
                </ng-container> -->


                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef> {{t('Action')}}</th>
                  <td mat-cell *matCellDef="let element">
                    <button matTooltip="{{t('Edit')}}" style="color: blue;" data-toggle="tooltip"
                      data-placement="bottom" (click)="sidenav.open();editdialog(element)" class="Edit"><span
                        class="mat-button-wrapper"><mat-icon role="img"
                          class="mat-icon notranslate text-blue-600 mat-icon-no-color" aria-hidden="true"
                          data-mat-icon-type="svg" data-mat-icon-name="pencil-alt"
                          data-mat-icon-namespace="heroicons_outline">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="#941C3C"
                            fit="" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" focusable="false">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                            </path>
                          </svg></mat-icon></span>
                    </button>&nbsp;
                    <!-- <button matTooltip="{{t('Delete')}}" (click)="DeleteQuestions(element.id)"
                      style="color: #941C3C;"><i class="material-icons">delete</i></button> -->
                  </td>
                </ng-container>


                <ng-container matColumnDef="expandedDetail">
                  <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
                    <div class="example-element-detail"
                      [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">

                      <table mat-table [dataSource]="element.courseSessionQuestionOptionBean" style="width: 100%">


                        <ng-container matColumnDef="position">
                          <th mat-header-cell *matHeaderCellDef># </th>
                          <td mat-cell *matCellDef="let element; let i = index;">{{i+1}} </td>
                        </ng-container>

                        <ng-container matColumnDef="questionOptionName">
                          <th mat-header-cell *matHeaderCellDef>{{t('Option Name')}} </th>
                          <td mat-cell *matCellDef="let element"> {{element.questionOptionName}}</td>
                        </ng-container>

                        <ng-container matColumnDef="optionName">
                          <th mat-header-cell *matHeaderCellDef>{{t('Option')}} </th>
                          <td mat-cell *matCellDef="let element"> {{element.optionName}}</td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>

                      </table>
                    </div>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

                <tr mat-row *matRowDef="let element; columns: displayedColumns;" class="example-element-row"
                  [class.example-expanded-row]="expandedElement === element"
                  (click)="expandedElement = expandedElement === element ? null : element">
                </tr>



                <!-- <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row">
                </tr> -->

              </table>
              <mat-paginator #paginator [pageSize]="10" [pageSizeOptions]="[10, 25, 100]"
                (page)="getPageDetails($event)">
              </mat-paginator>
            </div>


          </div>
        </fuse-card>
      </div>
    </div>

  </div>
  <mat-sidenav #sidenav mode="over" backdrop="true" class="example-sidenav" [ngStyle]="{ 'width.%': sidenavWidth }"
    opened="false" position="end">
    <!-- Form Title -->
    <mat-toolbar class="mat-accent m-0 mail-compose-dialog">
      <mat-toolbar-row fxFlex fxLayout="row" fxLayoutAlign="space-between center"
        style="background: #941C3C;color: white;">
        <span class="title dialog-title">{{title}}</span>
        <div class="flex items-center pl-2 ml-auto space-x-0.5 sm:space-x-2">
          <button mat-icon-button (click)="sidenav.toggle();closeScreen()" aria-label="Close dialog">
            <mat-icon>close</mat-icon>
          </button>
        </div>
      </mat-toolbar-row>
    </mat-toolbar>
    <mat-dialog-content class="m-0 form formGroup h-auto" fusePerfectScrollbar>

      <div *ngIf="addForm">
        <div class="col-70">
          <div class="vertical-stepper-wrapper">
            <div class="flex items-center pt-4 ml-auto space-x-0.5 sm:space-x-2" style="float: right;padding-right: 3px;">
              <button (click)="addNewNote(content)" mat-raised-button color="accent">
                {{t('Add Question')}}
              </button>

            </div>
            <!-- <div style="padding-left: 25px;"><h4>Question Language for {{examLang.examLanguage}}</h4></div> -->

            <form [formGroup]="QuestionsOptions" fxFlex class="event-form w-100-p">

              <div fxLayout="column" class="p-20" style="padding: 1rem !important;">

                <h2 class="text-3xl md:text-4xl font-extrabold tracking-tight leading-7 sm:leading-10 truncate">
                  {{t('Questions')}} {{ mainBulkArray.length}}/{{ noOfQnt }}
                </h2>&nbsp;
              </div>
            </form>
            <!-- <table mat-table [dataSource]="mainBulkArray" style="width: 100%">
              <ng-container matColumnDef="languageType">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>{{t('Language')}}</th>
                <td matTooltip="{{element.languageType}}" mat-cell *matCellDef="let element">
                  {{element.languageType}}
                </td>
              </ng-container>

              <ng-container matColumnDef="workName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>{{t('Work Type')}}</th>
                <td matTooltip="{{element.workName}}" mat-cell *matCellDef="let element">
                  {{element.workName}}
                </td>
              </ng-container>

              <ng-container matColumnDef="createdOn">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>{{t('Created Date')}}</th>
                <td matTooltip="{{element.createdOn| date:'dd-MM-yyyy'}}" mat-cell *matCellDef="let element">
                  {{element.createdOn | date:"dd-MM-yyyy"}} </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table> -->

            <span *ngIf="mainBulkArray.length>0">
              <div *ngFor="let qest of mainBulkArray; let i = index;">
                 
                  <div class="flex flex-col gt-xs:flex-row flex flex-col mt-4 px-8 pt-10 bg-card shadow rounded overflow-hidden" style="background: whitesmoke !important;">
                      {{i+1}}. {{qest.questionName}}

                          <div class="mx-2 mt-4 space-y-1.5">
                            <ng-container *ngFor="let item of qest.courseSessionQuestionOptionBean">
                              <div class="group flex items-center">
                                <mat-checkbox [(ngModel)]="item.correctOption" [ngModelOptions]="{standalone: true}"
                                class="flex items-center" [color]="'primary'">
                                </mat-checkbox>
                                <label>{{item.questionOptionName}}</label>
                              </div>
                            </ng-container>
                          </div>
                       <br>
                      
                   </div>
              </div>
          </span>
            <div mat-dialog-actions fxLayoutAlign="end center" class="m-0 p-6 " fxLayout="row">
<!-- 
              <button (click)="CourseForm.reset();restForm()" matTooltip="Reset" aria-label="Reset" mat-raised-button class="mr-4">
                <span>{{t('CLEAR')}}</span>
              </button> -->
              <button [disabled]="isEnable" type="submit" (click)="submit()" mat-raised-button color="accent" aria-label="Submit"
                matTooltip="Submit"><span>{{t('SUBMIT')}}</span></button>

            </div>
          </div>
        </div>

      </div>
      <div *ngIf="editForm">
        <form [formGroup]="QuestionsOptions" fxFlex class="event-form w-100-p">

          <div fxLayout="column" class="p-20" style="padding: 1rem !important;">

            <mat-form-field style="width: 80%" appearance="outline">
              <mat-label> {{t('Question Language')}} </mat-label>
              <input matInput formControlName="language" readonly>
            </mat-form-field><br />

            <mat-form-field style="width: 80%" appearance="outline">
              <mat-label>{{t('Question')}}</mat-label>
              <textarea #input2 matInput rows="2" formControlName="question" maxlength="1000"></textarea>
              <mat-hint align="end">{{input2.value?.length || 0}}/1000</mat-hint>
            </mat-form-field>
            <!-- <div fxLayout="column" class="p-20" style="padding: 1rem !important;"> -->
            <ng-container *ngIf="editOptions.length>0">
              <div class="mx-2 mt-4 space-y-1.5">
                <ng-container *ngFor="let item of editOptions">
                  <div class="group flex items-center">
                    <mat-checkbox [(ngModel)]="item.selected" [ngModelOptions]="{standalone: true}"
                      class="flex items-center" [color]="'primary'">
                    </mat-checkbox>
                    <label>{{item.optionvalue}}</label>
                    <mat-icon matTooltip="{{t('optionRemove')}}"
                    class="hidden group-hover:flex ml-auto icon-size-5 cursor-pointer"
                    [svgIcon]="'heroicons_solid:x'"
                    (click)="removeTaskFromNote(item, editOptions)" [color]="color" 
                    (mouseover)="color = 'warn'"
                    ></mat-icon>
                  </div>
                    <!-- <pre>{{item|json}}</pre>   -->
                </ng-container>
              </div>
               <br>
            </ng-container>
            <!-- </div> -->
            <div class="flex items-center">
              <mat-icon class="-ml-0.5 icon-size-5 text-hint" [svgIcon]="'heroicons_solid:plus'"></mat-icon>
              <mat-form-field style="width:78%" appearance="outline">

                <input #input1 #newTaskInput [placeholder]="t('Add Option')"
                  (keydown.enter)="addTaskToNote(newTaskInput.value); newTaskInput.value = ''" matInput rows="1"
                  formControlName="option" maxlength="200">
                <mat-hint align="end">{{input1.value?.length || 0}}/200</mat-hint>
              </mat-form-field>
            </div>

            
          </div>
        </form>
        <!-- </mat-dialog-content> -->


        <div mat-dialog-actions fxLayoutAlign="end center" class="m-0 p-6 " fxLayout="row">

          <!-- <button (click)="CourseForm.reset()" matTooltip="{{t('CLEAR')}}" aria-label="Reset" mat-raised-button
            class="mr-4">
            <span>{{t('CLEAR')}} </span>
          </button> -->
          <button type="submit" (click)="submit(CourseForm)" mat-raised-button color="accent" aria-label="Submit"
            matTooltip="{{t('SUBMIT')}}"><span>{{t('SUBMIT')}}</span></button>

        </div>

        <!--end edit question-->



      </div>
    </mat-dialog-content>

  </mat-sidenav>
</mat-sidenav-container>

<ng-template #content>

  <h2 mat-dialog-title *transloco="let t; read: 'EXAMS'">{{t('Question')}}</h2>

  <div class="flex flex-col flex-auto md:w-160 md:min-w-160 -m-6" style="padding: 16px;"><!---->



    <form [formGroup]="QuestionsOptions" *transloco="let t; read: 'EXAMS'">
      <div class="col-70">
        <div>
          <mat-form-field style="width: 90%" appearance="outline">
            <mat-label>{{t('Question Language')}}</mat-label>
            <input matInput formControlName="language" readonly>
          </mat-form-field><br />

          <mat-form-field style="width: 90%" appearance="outline">
            <mat-label>{{t('Question')}}</mat-label>
            <textarea #input4 matInput rows="2" formControlName="question" maxlength="1000"></textarea>
            <mat-hint align="end">{{input4.value?.length || 0}}/1000</mat-hint>
          </mat-form-field>

        </div>
        <ng-container *ngIf="addOption.length>0">
          <div class="mx-2 mt-4 space-y-1.5">
            <ng-container *ngFor="let item of addOption">
              <div class="group flex items-center">
                <mat-checkbox formControlName="amateur" [(ngModel)]="item.selected" class="flex items-center"
                  [color]="'primary'">
                </mat-checkbox>
                <label>{{item.optionvalue}}</label>
                <mat-icon matTooltip="{{t('optionRemove')}}"
                class="hidden group-hover:flex ml-auto icon-size-5 cursor-pointer"
                [svgIcon]="'heroicons_solid:x'"
                (click)="removeTaskFromNoteAdd(item, addOption)" [color]="color" 
                (mouseover)="color = 'warn'"
                ></mat-icon>
              </div>
                 <!-- <pre>{{item|json}}</pre>   -->
            </ng-container>
          </div>
        </ng-container>
        <div class="flex items-center">
          <mat-icon class="-ml-0.5 icon-size-5 text-hint" [svgIcon]="'heroicons_solid:plus'"></mat-icon>
          <mat-form-field style="width:78%" appearance="outline">

            <input #input3 #newTaskInput [placeholder]="t('Add Option')"
              (keydown.enter)="addTaskToNote(newTaskInput.value); newTaskInput.value = ''" matInput rows="1"
              formControlName="option" maxlength="200">
            <mat-hint align="end">{{input3.value?.length || 0}}/200</mat-hint>
          </mat-form-field>
        </div>

        <div class="col lg-12">
          <br>
          <button (click)="SubmitQuestionForm()" mat-flat-button="" matdialogclose="" mat-raised-button color="accent" style="float: right;"
            class="mdc-button mdc-button--unelevated mat-mdc-unelevated-button mat-unthemed mat-mdc-button-base"
            type="button"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span
              class="mdc-button__label"> {{t('SUBMIT')}} </span><span class="mat-mdc-focus-indicator"></span><span
              matripple="" class="mat-ripple mat-mdc-button-ripple"></span><span
              class="mat-mdc-button-touch-target"></span></button>

              <button (click)="modalReference.close()"  _ngcontent-iac-c131="" mat-raised-button="" mat-flat-button="" matdialogclose="" type="button" class="mat-focus-indicator mdc-button mdc-button--unelevated mat-mdc-unelevated-button mat-unthemed mat-mdc-button-base mat-flat-button mat-raised-button mat-button-base" style="float: right;margin-right: 20px;"><span class="mat-button-wrapper"><span _ngcontent-iac-c131="" class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span _ngcontent-iac-c131="" class="mdc-button__label"> {{t('Close')}} </span><span _ngcontent-iac-c131="" class="mat-mdc-focus-indicator"></span><span _ngcontent-iac-c131="" matripple="" class="mat-ripple mat-mdc-button-ripple"></span><span _ngcontent-iac-c131="" class="mat-mdc-button-touch-target"></span></span><span matripple="" class="mat-ripple mat-button-ripple" ng-reflect-disabled="false" ng-reflect-centered="false" ng-reflect-trigger="[object HTMLButtonElement]"></span></button>
              
              <br>
              <br>
              
              
        </div><!----><!---->
      </div><!----><!---->
    </form>

  </div>
</ng-template>