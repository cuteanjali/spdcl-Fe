<style>
    .check {
        width: 70px;
        height: 20px;
  
        clear: both;
        display: block;
        
        border-radius: 4px;
    }
    .check::after {
        clear: both;
        display: block;
        content: "";
    }
    .check .checkbox-container {
        float: left;
        width: 20%;
        box-sizing: border-box;
        text-align:center;

    }
    </style>

<mat-sidenav-container fullscreen [hasBackdrop]="false" *transloco="let t; read: 'TERMSCONDITION'">
    <div class="relative flex flex-col flex-auto min-w-0 overflow-hidden">

        <!-- Header -->

        <div
            class="flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between p-6 sm:py-3 sm:px-10 border-b bg-card dark:bg-transparent">
            <div class="flex-1 min-w-0">
                <!-- Breadcrumbs -->

                <!-- Title -->

                <div class="mt-2">
                    <h2 class="text-3xl md:text-4xl font-extrabold tracking-tight leading-7 sm:leading-10 truncate">
                    <span>
                        {{t('Workers Certificate Detail')}}
                    </span>
                    </h2>
                </div>
            </div>
            <div class="flex items-center justify-end">
                
                <div class="example-header">
                    <mat-form-field >
                        <mat-icon>search</mat-icon>
                        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="{{t('SEARCH')}}" >
                    </mat-form-field>
                </div>
            </div>

        </div>

        <!-- Header & Cards -->
        <div class="relative pb-12 sm:pt-0 sm:pb-2 px-6 sm:px-6 overflow-hidden">

            <!-- Card -->
            <div class="flex flex-col items-center mt-10 sm:mt-5">
                <fuse-card class="flex-col lg:flex-row w-full lg:max-w-7xl overflow-x-auto overflow-y-hidden">

                    <div class="grid grid-flow-col lg:grid-flow-row min-w-max lg:min-w-0 divide-x lg:divide-x-0 lg:divide-y"
                        style="width: 100%">
                        <div class="example-loading-shade" style="margin: auto;margin-top: 50px;" *ngIf="loading">
                            <mat-spinner *ngIf="loading" class="orange-spinner"></mat-spinner>
                            
                        </div>

                        <div class="mat-elevation-z8">

                            <div *ngIf="(data1 | async) as dataLoaded ">
                                
                                <table mat-table  [dataSource]="dataLoaded?.userGetBeans" style="width: 100%"  matSort matSortActive="firstName"
                                matSortDisableClear matSortDirection="desc" (matSortChange)="applySort($event)"
                                >
                                <ng-container matColumnDef="firstName">
                                    <th id="content" mat-header-cell *matHeaderCellDef mat-sort-header disableClear>{{t('Name')}}</th>
                                    <td matTooltip ="{{element.firstName +' '+element.lastName}}"  mat-cell *matCellDef="let element">  

                                        {{((element.firstName +" "+element.lastName).length > 10) ? ((element.firstName +" "+element.lastName).slice(0, 10) + '...') : element.firstName +" "+element.lastName}}
                                    </td>
                                </ng-container>
                                <!-- [routerLink]="['/apps/users/user-result/'+element.userId]"  -->
                                <ng-container matColumnDef="enrollmentId">
                                    <th mat-header-cell *matHeaderCellDef >{{t('Enrollment Id')}}</th>
                                    <td matTooltip ="{{element.enrollmentId}}" mat-cell *matCellDef="let element"> {{element.enrollmentId}} </td>
                                </ng-container>
                                <ng-container matColumnDef="email">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>{{t('Email')}}</th>
                                    <td matTooltip ="{{element.email}}"  mat-cell *matCellDef="let element"
                                    > 
                                    {{(element.email.length > 20) ? ((element.email).slice(0, 20) + '...') : element.email}}
                                </td>
                                </ng-container>
                                <ng-container matColumnDef="certNo">
                                    <th matTooltip ="{{t('certificateNo')}}" mat-header-cell *matHeaderCellDef>{{t('Cert.No')}}</th>
                                    <td matTooltip ="{{element.certNo}}"  mat-cell *matCellDef="let element"> {{element.certNo}} </td>
                                </ng-container>
                                <ng-container matColumnDef="ExpiryDate">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> {{t('ExpiryDate')}}
                                    </th>
                                    <td matTooltip="{{element.certExpireDateStr}}"  mat-cell *matCellDef="let element"> {{element.certExpireDateStr}} </td>
                                </ng-container>
                                <ng-container matColumnDef="examLanguage">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> {{t('Exam Language')}}
                                    </th>
                                    <td matTooltip="{{element.examLanguage}}" mat-cell *matCellDef="let element"> {{element.examLanguage}} </td>
                                </ng-container>

                                <ng-container matColumnDef="action">
                                    <th mat-header-cell *matHeaderCellDef>{{t('Action')}}</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.certColorCode ==='#FF5733' || element.certColorCode ===null">
                                            <button (click)="Downloadcertificate(element)" mat-icon-button matTooltip="{{t('Download Certificate')}}" >
                                              <mat-icon style="color:{{element.certColorCode}}" svgIcon="heroicons_outline:document-download"></mat-icon>
                                            </button>
                                            </span>
      
                                            <span *ngIf="element.certColorCode =='#008000' || element.certColorCode =='#FFEA00'">
                                              <button (click)="Downloadcertificate(element)" mat-icon-button matTooltip="{{t('Download Certificate')}}" >
                                                <mat-icon style="color:{{element.certColorCode}}" svgIcon="heroicons_outline:document-download"></mat-icon>
                                              </button>   
                                            </span>
                                    </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                        </div>
                            <span *ngIf="loading && !sortBool">
                                <mat-spinner style="margin: auto;margin-top: 50px;" class="orange-spinner"></mat-spinner>
                            </span> 

                            <mat-paginator #paginator
                            [length] = "resultsLength"
                                [pageSize]="apirequest.pageSize"
                                [pageSizeOptions]="[5,10, 25, 100]"
                                (page)="getPageDetails($event)"
                            ></mat-paginator>
                        </div>


                    </div>
                </fuse-card>
            </div>
        </div>

    </div>
</mat-sidenav-container>